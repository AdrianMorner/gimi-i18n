{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block extrastyle %}
  {{ block.super }}
  <link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}">
  {% if cl.formset %}
    <link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}">
  {% endif %}
  {% if cl.formset or action_form %}
    <script type="text/javascript" src="{% url 'admin:jsi18n' %}"></script>
  {% endif %}
  {{ media.css }}
{% endblock %}

{% block content %}
    <h1>Email tracking</h1>
    <div id="content-main">
        {% block input %}
            <form id="email" action="" method="post" novalidate="">
                {% csrf_token %}
                <div>
                    <fieldset class="module aligned ">
                        <div class="form-row field-args">
                            <div>
                                <label for="id_user_email">User email</label>
                                <input type="text" id="id_user_email" name="user_email"/>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div>
                    <fieldset class="module aligned ">
                        <div class="form-row field-args">
                            <div>
                                <label for="id_from_date">From Date</label>
                                <input id="id_from_date" type="date" name="from_date"/>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <div>
                    <fieldset class="module aligned ">
                        <div class="form-row field-args">
                            <div>
                                <label for="id_to_date">To Date</label>
                                <input id="id_to_date" type="date" name="to_date"/>
                            </div>
                        </div>
                    </fieldset>
                </div>
                <input class="default" value="Search" type="submit">
            </form>
            <script>
                document.getElementById("id_to_date").valueAsDate = new Date();
                document.getElementById("id_from_date").valueAsDate = new Date(new Date().setDate(new Date().getDate()-7));
            </script>
        {% endblock %}
        <br>
        <br>
        <br>
        <br>
        {% if data %}
            <h1>Results</h1>
            {% block result %}
                <form id="result" action="">
                    <div class="results">
                        <table id="result_list" align="left">
                            <thead>
                            <tr>
                                {% for column in columns %}
                                    <th scope="col"> {{ column|title }} </th>
                                {% endfor %}
                            </tr>
                            </thead>
                            <tbody>
                            {% for row in data %}
                                <tr class="{% cycle 'row1' 'row2' %}">
                                    {% for item in row %}
                                        <td>{{ item }}</td>
                                    {% endfor %}
                                </tr>
                            {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </form>
            {% endblock %}
        {% endif %}
    </div>
{% endblock %}
